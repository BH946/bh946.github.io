---
title:  "[java,ë°±ì¤€2749]í”¼ë³´ë‚˜ì¹˜ ìˆ˜ 3 - í–‰ë ¬ ì œê³±ê³¼ DPë¥¼ í™œìš©í•œ ìµœì í™”"
categories : [BaekjoonTest]
tag: [ë°±ì¤€, ì•Œê³ ë¦¬ì¦˜, DP, ë¶„í• ì •ë³µ, í–‰ë ¬ê³±ì…ˆ]
toc: true
toc_sticky: true
author_profile: false
sidebar:
   nav: "docs"
typora-root-url: ../../..
---



**í–‰ë ¬ì˜ ê±°ë“­ì œê³± ì„±ì§ˆê³¼ DPë¥¼ í™œìš©í•˜ì—¬ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ì˜ Në²ˆì§¸ ìˆ˜ë¥¼ ë¹ ë¥´ê²Œ êµ¬í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. í”¼ì‚¬ë…¸ ì£¼ê¸°ë¥¼ ì‚¬ìš©í•œ ë°©ë²•ì€ ì•„ë‹™ë‹ˆë‹¤.**

**[í”¼ë³´ë‚˜ì¹˜ ìˆ˜ 3(ë°±ì¤€2749)](https://www.acmicpc.net/problem/2749)**

<br>

**ì•„ë˜ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ë¥¼ í–‰ë ¬ë¡œ ë°”ê¿” ë‚˜íƒ€ë‚´ë³´ë©´ ê³µì‹ì„ ë„ì¶œí•  ìˆ˜ ìˆë‹¤.(ìì„¸í•œ ë„ì¶œ ê³¼ì •ì€ ìƒëµ. í•„ìš”ì‹œ êµ¬ê¸€ë§)**

![Image](https://github.com/user-attachments/assets/3547176a-f8df-4b6e-8b1d-bbed2f53d5b9) 

n=1ì¼ë•Œ ëŒ€ì…í•´ë³´ë©´ ì™¼ìª½ì²˜ëŸ¼ {0,1},{1,1} ì´ ë‚˜ì˜´ì„ ì•Œ ìˆ˜ ìˆìŒ.   
ë§Œì•½ n=5ë©´? {0,1},{1,1} ì„ 5ë²ˆ í–‰ë ¬ê³± í•˜ë©´ êµ¬í•´ì§.  
ì´ í–‰ë ¬ì‹ì„ ì´ìš©í•´ì„œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ êµ¬í•˜ê²Œ ë˜ë©´ ì •ë‹µ ë„ì¶œì€ result\[0][1] ì´ëŸ°ì‹ìœ¼ë¡œ fn ìš”ì†Œë§Œ ì¶œë ¥!

<br>

<br>

## í’€ì´

**êµ¬í˜„ ì£¼ì˜ì‚¬í•­**  
ğŸ’¡ ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ë°˜ë“œì‹œ ì²´í¬í•´ì•¼ í•©ë‹ˆë‹¤:

- long ìë£Œí˜• ì‚¬ìš© í•„ìˆ˜
- í–‰ë ¬ ì—°ì‚° ì ìš©
- ë©”ëª¨ì´ì œì´ì…˜ìœ¼ë¡œ ì¤‘ë³µ ê³„ì‚° ë°©ì§€

ì´ ë¬¸ì œëŠ” **<span style="color:#ff9300">í–‰ë ¬ì˜ ê±°ë“­ì œê³±ì„ ë¶„í• ì •ë³µìœ¼ë¡œ ê³„ì‚°í•˜ê³ , DPë¡œ ì¤‘ë³µ ê³„ì‚°ì„ ë°©ì§€</span>**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ êµ¬í˜„ ì‚¬í•­**

1. 2x2 í–‰ë ¬ì˜ ê³±ì…ˆ í•¨ìˆ˜ êµ¬í˜„

2. **ë¶„í• ì •ë³µìœ¼ë¡œ ê±°ë“­ì œê³± ìµœì í™”**

   ì˜ˆë¡œ `200ì œê³±x200ì œê³±=400ì œê³±` ì´ë¼ëŠ” ë‹¨ìˆœí•œ ìˆ˜í•™ê³„ì‚°ì´ì§€ë§Œ ì´ ì•„ì´ë””ì–´ë¡œ ë³µì¡ë„ë¥¼ ê°ì†Œ!

3. HashMapì„ í™œìš©í•œ ë©”ëª¨ì´ì œì´ì…˜ => top-bottom DP

<br>

**í–‰ë ¬ ê³±ì…ˆ**

```java
static Long[][] calMatrix(Long[][] m1, Long[][] m2, long n) {
    Long[][] result = new Long[2][2];
    result[0][0] = (m1[0][0]*m2[0][0] + m1[0][1]*m2[1][0]) % 1000000;
    result[0][1] = (m1[0][0]*m2[0][1] + m1[0][1]*m2[1][1]) % 1000000;
    result[1][0] = result[0][1];  // í”¼ë³´ë‚˜ì¹˜ í–‰ë ¬ì˜ íŠ¹ì„±
    result[1][1] = (m1[1][0]*m2[0][1] + m1[1][1]*m2[1][1]) % 1000000;
    map.put(n, result);
    return result;
}
```

<br>

**ë¶„í• ì •ë³µ í”¼ë³´ë‚˜ì¹˜**

- í™€ìˆ˜ì˜ ì´í•´ë¥¼ ë•ìë©´, n=5ì¼ ê²½ìš° n/2=2 ê°€ ë‚˜ì˜´.   
  ìš°ë¦° ì œê³±ìˆ˜ë¥¼ í•©í•˜ë©´ 5ê°€ ë‚˜ì™€ì•¼í•˜ë‹ˆê¹Œ 3ì´ í•„ìš”!  
  ê·¸ë˜ì„œ n/2 ì— +1 ì„ ì¶”ê°€í–ˆì„ ë¿ì„.
- ì œê³±ìˆ˜ í•©í•œë‹¤ëŠ” ì˜ë¯¸ëŠ” `a^200 x a^200 = a^400` ë¥¼ êµ¬í• ë•Œ ê³±í•˜ê¸°ì—ì„œ ì§€ìˆ˜ëŠ” ë”í•´ì§„ë‹¤ëŠ” ìˆ˜í•™ì  íŠ¹ì§•ì„ ë§í•¨.(ì§€ìˆ˜:200+200=400)

```java
static Long[][] fib(long n) {
    if(n == 1) return matrix;
    if(map.containsKey(n)) return map.get(n);
    
    return n % 2 == 0 ? 
        calMatrix(fib(n/2), fib(n/2), n) : 
        calMatrix(fib(n/2), fib(n/2 + 1), n);
}
```

<br>

<br>

## ì „ì²´ ì½”ë“œ

```java
public class í”¼ë³´ë‚˜ì¹˜ìˆ˜3_2749 {
  static Long[][] matrix = // {0L, 1L}, {1L, 1L}ê°€ í• ë‹¹ë˜ê²Œ ì´ˆê¸°í™” ã„±
  static HashMap<Long, Long[][]> map = new HashMap<>(); //ë©”ëª¨ì´ì œì´ì…˜

  //í–‰ë ¬ ì—°ì‚° í•¨ìˆ˜
  static Long[][] calMatrix(Long[][] m1, Long[][] m2, long n) {
    Long[][] result = new Long[2][2];
    result[0][0] = (m1[0][0]*m2[0][0]+m1[0][1]*m2[1][0])%1000000;
    result[0][1] = (m1[0][0]*m2[0][1]+m1[0][1]*m2[1][1])%1000000;
    result[1][0] = result[0][1]; //=> í”¼ë³´ë‚˜ì¹˜ ìˆ˜ í–‰ë ¬ íŠ¹ì§•ì„
    result[1][1] = (m1[1][0]*m2[0][1]+m1[1][1]*m2[1][1])%1000000;
    map.put(n, result);
    return result;
  }

  static Long[][] fib(long n) {
    //base condition
    if(n==1) {
      return matrix;
    }
    if (map.containsKey(n)) {
      return map.get(n);
    }
    //recursion
    if (n % 2 == 0) { //ì§ìˆ˜
      return calMatrix(fib(n / 2), fib(n / 2),n);
    } else { //í™€ìˆ˜
      return calMatrix(fib(n / 2), fib(n / 2 + 1),n);
    }
  }

  public static void main(String[] args) throws IOException {
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    long n = Long.parseLong(br.readLine());
    Long[][] result = fib(n);
    System.out.println(result[0][1]);
  }
}
```

*<span style="color:#777777">ì£¼ê´€ì ì¸ ìƒê°ì˜ í’€ì´ì´ë¯€ë¡œ í‹€ë¦° ë¶€ë¶„ ì§€ì ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤âš¡</span>*
