---
title:  "[java,ë°±ì¤€3190]ë±€ - Dequeë¥¼ í™œìš©í•œ ë±€ ì´ë™ ì‹œë®¬ë ˆì´ì…˜"
categories : [BaekjoonTest]
tag : [ë°±ì¤€, ì•Œê³ ë¦¬ì¦˜, ì‹œë®¬ë ˆì´ì…˜, Deque, êµ¬í˜„]
toc: true
toc_sticky: true
author_profile: false
sidebar:
   nav: "docs"
typora-root-url: ../../..
---



**Deque ìë£Œêµ¬ì¡°ë¥¼ í™œìš©í•˜ì—¬ ë±€ì˜ ë¨¸ë¦¬ì™€ ê¼¬ë¦¬ë¥¼ ë™ì‹œì— ê´€ë¦¬í•˜ë©° ì´ë™ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.**

**[ë±€(ë°±ì¤€3190)](https://www.acmicpc.net/problem/3190)**

<br>

**ì˜ˆì‹œë¥¼ ì‹œê°í™” í•´ë³´ì**

```text
ë¬¸ì œ 1ë²ˆ ì˜ˆì‹œ ì‹œê°í™”:
1ì´ˆ
[0, 1, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 2, 0, 0]
[0, 0, 0, 2, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 2, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]

...

5ì´ˆ
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 1, 2, 0, 0]
[0, 0, 0, 1, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 2, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]

...

8ì´ˆ
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 2, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 0, 0, 0, 0, 0]
[0, 0, 2, 1, 0, 0, 0]
[0, 0, 0, 1, 0, 0, 0]

9ì´ˆ => ë‹µ
```

<br>

<br>

## í’€ì´

**êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­**

ğŸ’¡ ë±€ì˜ ë¨¸ë¦¬ì™€ ê¼¬ë¦¬ ì´ë™ì„ ë™ì‹œì— ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ìë£Œêµ¬ì¡°ë¥¼ ìƒê°í•˜ê³ , ë°©í–¥ ì „í™˜ ì‹œì ì„ ì •í™•íˆ ì²´í¬í•´ì•¼ í•œë‹¤.  
**<span style="color:#ff9300">Dequeë¡œ ë±€ì˜ ë¨¸ë¦¬ì™€ ê¼¬ë¦¬ë¥¼ ê´€ë¦¬í•˜ê³ , ë§¤ ì´ˆë§ˆë‹¤ ì´ë™ê³¼ ë°©í–¥ ì „í™˜ì„ ì²˜ë¦¬</span>**

ğŸ’¡ í•­ìƒ ì‹œë®¬ë ˆì´ì…˜ ë¬¸ì œëŠ” "**ë””ë²„ê¹… ê°•ì¶”!"**

<br>

**í•µì‹¬ êµ¬í˜„ ì‚¬í•­**

- **Deque**ë¥¼ ì‚¬ìš©í•œ ë±€ ê´€ë¦¬ (ë¨¸ë¦¬, ê¼¬ë¦¬ ìœ„ì£¼)
- **ì‚¬ê³¼** ë¨¹ê¸° ì²˜ë¦¬
- **ë°©í–¥ ì „í™˜** ì²˜ë¦¬
- **ì¶©ëŒ** ì²´í¬ (ë²½, ìê¸°ìì‹ )

<br>

**ë±€ ì´ë™ ì²˜ë¦¬**

1. `nx<0||ny<0||nx>N-1||ny>N-1`: ì¶©ëŒì²´í¬ - ë²½ ë¶€ë”ª

2. `map[nx][ny]==1`: ì¶©ëŒì²´í¬ - ë±€ ëª¸ ë¶€ë”ª

3. ì‚¬ê³¼ ìœ ë¬´ ë¶„ê¸°??

   1. `if map[nx][ny] == 2`: ì‚¬ê³¼ ìˆë‹¤ë©´??

      `checkDir(time, head, qu);` ì²˜ë¦¬ ì´í›„ì— ë¨¸ë¦¬ì´ë™, ê¼¬ë¦¬ ê·¸ëŒ€ë¡œ ë¡œì§ ì‚¬ìš©

   2. `else` : ì‚¬ê³¼ ì—†ë‹¤ë©´?

      `checkDir(time, head, qu);` ì²˜ë¦¬ ì´í›„ì— ë¨¸ë¦¬ì´ë™, ê¼¬ë¦¬ 1ì¹¸ ì œê±° ë¡œì§ ì‚¬ìš©

```java
static void solve(Queue<Info> qu) {
    Deque<Pair> dq = new ArrayDeque<>();
	map[0][0] = 1;
    dq.offer(new Pair(0, 0, 0));
    while (true) {
        // ë¨¸ë¦¬ ì´ë™
        Pair head = dq.peekFirst();
        Pair tail = dq.peekLast();
        int nx = head.x + dx[head.dir];
        int ny = head.y + dy[head.dir];
        
        // ì¶©ëŒ ì²´í¬
        if(nx<0||ny<0||nx>N-1||ny>N-1) break; //ë²½ ë¶€ë”ª
        if(map[nx][ny]==1) break; //ë±€ ëª¸ì— ë¶€ë”ª
        
        // ì´ë™ ì²˜ë¦¬
        if (map[nx][ny] == 2) {  // ì‚¬ê³¼ê°€ ìˆëŠ” ê²½ìš°
			//(ì¤‘ìš”)ë°©í–¥ ì „í™˜ ìˆë‚˜ ì²´í¬ í›„ ì¶”ê°€(dir ìˆ˜ì •)
			int dir = checkDir(time, head, qu);
            map[nx][ny] = 1;
            dq.offerFirst(new Pair(nx, ny, dir));
        } else {  // ì‚¬ê³¼ê°€ ì—†ëŠ” ê²½ìš°
            //(ì¤‘ìš”)ë°©í–¥ ì „í™˜ ìˆë‚˜ ì²´í¬ í›„ ì¶”ê°€(dir ìˆ˜ì •)
            map[tail.x][tail.y] = 0;
            dq.pollLast();
			int dir = checkDir(time, head, qu);
            map[nx][ny] = 1;
            dq.offerFirst(new Pair(nx, ny, dir));
        }
    }
}

```

<br>

**ë°©í–¥ ì „í™˜ ì²˜ë¦¬**

1. dirì€ 0~3 ì‚¬ì´ì˜ ê°’ì„ ê°€ì§€ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì‚¬ì´ì˜ ê°’ì„ ê°€ì§€ê²Œ ë¡œì§ì„ êµ¬ì„±
2. í ì œê±°ë¡œ null ì—ëŸ¬ ë°œìƒ ë°©ì§€ ìœ„í•´ mainí•¨ìˆ˜ì—ì„œ `qu.offer(new Info(9999999, 'X'));` í•„ìˆ˜

```java
private static int checkDir(int time, Pair head, Queue<Info> qu) {
    Info info = qu.peek();
    int dir = head.dir;
    if (info.x == time) {
      if(info.c=='D') dir = (dir+1)%4;
      if (info.c == 'L') {
        if(dir-1 < 0) dir = 3;
        else dir = dir-1;
      }
	  qu.poll(); //í ì œê±°
    }
    return dir;
}
```

<br>

<br>

## ì „ì²´ ì½”ë“œ

```java
public class ë±€_3190 {
  static int N, K, L;
  static int[][] map; //ì•½ì† - ë¹ˆê³µê°„:0, ë±€:1, ì‚¬ê³¼:2
  static int[] dx = {0, 1, 0, -1};
  static int[] dy = {1, 0 ,-1, 0};
  static int result;

  static void solve(Queue<Info> qu) {
    //init
    Deque<Pair> dq = new ArrayDeque<>();
    int time = 0;
    map[0][0] = 1;
    dq.offer(new Pair(0, 0, 0));
    //run
    while (true) {
      time++;
      Pair head = dq.peekFirst();
      Pair tail = dq.peekLast();
      int nx = head.x + dx[head.dir];
      int ny = head.y + dy[head.dir];
      //base condition
      if(nx<0||ny<0||nx>N-1||ny>N-1) break; //ë²½ ë¶€ë”ª
      if(map[nx][ny]==1) break; //ë±€ ëª¸ì— ë¶€ë”ª
      //run
      if (map[nx][ny] == 2) { //ì‚¬ê³¼ ìˆë‹¤ë©´? -> ë¨¸ë¦¬ì´ë™, ê¼¬ë¦¬ ê·¸ëŒ€ë¡œ
        //(ì¤‘ìš”)ë°©í–¥ ì „í™˜ ìˆë‚˜ ì²´í¬ í›„ ê¸°ë¡(dir ìˆ˜ì •)
        int dir = checkDir(time, head, qu);
        map[nx][ny] = 1;
        dq.offerFirst(new Pair(nx, ny, dir));
      } else { //ì‚¬ê³¼ ì—†ë‹¤ë©´? -> ë¨¸ë¦¬ì´ë™, ê¼¬ë¦¬ 1ì¹¸ ì œê±°
        //(ì¤‘ìš”)ë°©í–¥ ì „í™˜ ìˆë‚˜ ì²´í¬ í›„ ì¶”ê°€(dir ìˆ˜ì •)
        int dir = checkDir(time, head, qu);
        map[tail.x][tail.y] = 0;
        dq.pollLast();
        map[nx][ny] = 1;
        dq.offerFirst(new Pair(nx, ny, dir));
      }
      printAll(time); //debug
    }
    result = time;
  }

  private static void printAll(int time) {
    System.out.println(time);
    for (int i = 0; i < N; i++) {
      System.out.println(Arrays.toString(map[i]));
    }
    System.out.println();
  }

  private static int checkDir(int time, Pair head, Queue<Info> qu) {
    Info info = qu.peek();
    int dir = head.dir;
    if (info.x == time) {
      if(info.c=='D') dir = (dir+1)%4;
      if (info.c == 'L') {
        if(dir-1 < 0) dir = 3;
        else dir = dir-1;
      }
      qu.poll(); //í ì œê±°
    }
    return dir;
  }

  public static void main(String[] args) throws IOException {
    //input
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    N = Integer.parseInt(br.readLine());
    K = Integer.parseInt(br.readLine());
    map = new int[N + 1][N + 1];
    for (int i = 0; i < K; i++) {
      StringTokenizer stk = new StringTokenizer(br.readLine(), " ");
      int x = Integer.parseInt(stk.nextToken())-1;
      int y = Integer.parseInt(stk.nextToken())-1; //-1 ì´ìœ :ì¢Œí‘œ 1,1ì„ 0,0ìœ¼ë¡œ ë§ì¶”ê¸° ìœ„í•¨
      map[x][y] = 2; //ì‚¬ê³¼:2
    }
    L = Integer.parseInt(br.readLine());
    Queue<Info> qu = new ArrayDeque<>();
    for (int i = 0; i < L; i++) {
      StringTokenizer stk = new StringTokenizer(br.readLine(), " ");
      qu.offer(new Info(Integer.parseInt(stk.nextToken()), stk.nextToken().charAt(0)));
    }
    qu.offer(new Info(9999999, 'X')); //í ëª¨ë‘ ì œê±°ë¡œ null ì—ëŸ¬ ë°©ì§€ ìœ„í•´
    //run
    solve(qu);
    //output
    System.out.println(result);
  }
  static class Pair{
    int x; int y; int dir;

    Pair(int x, int y, int dir) {
      this.x=x; this.y=y; this.dir=dir;
    }
  }
  static class Info{
    int x; char c;

    Info(int x, char c) {
      this.x =x; this.c=c;
    }
  }
}
```

*<span style="color:#777777">ì£¼ê´€ì ì¸ ìƒê°ì˜ í’€ì´ì´ë¯€ë¡œ í‹€ë¦° ë¶€ë¶„ ì§€ì ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤âš¡</span>*
